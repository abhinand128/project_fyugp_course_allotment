{% extends 'student_base.html' %}

{% block content %}
{% load custom_filters %}

<div class="container mt-5">
    <div class="card shadow-lg p-4">
        <h2 class="text-center text-black fw-bold">Your Selected Courses</h2>

        {% for paper_no, preferences in categorized_preferences.items %}
            {% if preferences %}
                <h4 class="mt-4 text-black fw-semibold">
                    {% if student.current_sem == 1 %}
                        {% if paper_no == 1 %} Major Course (DSC 1)
                        {% elif paper_no == 2 %} Minor Courses (DSC 2)
                        {% elif paper_no == 3 %} Minor Courses (DSC 3)
                        {% elif paper_no == 4 %} MDC Course
                        {% else %} Paper {{ paper_no }} 
                        {% endif %}
                    {% elif student.current_sem == 2 %}
                        {% if paper_no == 1 %} Major Course (DSC 4)
                        {% elif paper_no == 2 %} Minor Courses (DSC 5)
                        {% elif paper_no == 3 %} Minor Courses (DSC 6)
                        {% elif paper_no == 4 %} MDC Course
                        {% else %} Paper {{ paper_no }} 
                        {% endif %}
                    {% endif %}
                </h4>
                <table class="table table-bordered table-striped shadow">
                    <thead class="bg-black text-white">
                        <tr>
                            <th>Preference</th>
                            <th>Course Name</th>
                            <th>Department</th>
                        </tr>
                    </thead>
                    <tbody>
                        {% for option, preference in preferences.items %}
                            <tr>
                                <td>{{ option|replace:"_" }}</td>  <!-- Removes underscore from Option_1, Option_2 -->
                                <td>{{ preference.batch.course.course_name }}</td>
                                <td>{{ preference.batch.course.department }}</td>
                            </tr>
                        {% endfor %}
                    </tbody>
                </table>
            {% endif %}
        {% endfor %}

        <div class="text-center mt-4">
            <a href="{% url 'edit_preferences' %}" class="btn btn-warning">Edit Preferences</a>
        </div>
    </div>
</div>
{% endblock %}
